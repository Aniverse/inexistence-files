diff -Nur rtorrent-0.9.4/configure.ac rtorrent-0.9.4-patched/configure.ac
--- rtorrent-0.9.4/configure.ac 2014-05-14 10:30:51.000000000 -0400
+++ rtorrent-0.9.4-patched/configure.ac 2019-01-12 14:16:32.845640059 -0500
@@ -4,7 +4,7 @@
  
 AM_INIT_AUTOMAKE
 AC_CONFIG_HEADERS(config.h)
-AM_PATH_CPPUNIT(1.9.6)
+
  
 AC_PROG_CXX
 AC_PROG_LIBTOOL
@@ -37,17 +37,13 @@
    AC_MSG_ERROR([requires either NcursesW or Ncurses library])
 fi
  
-CFLAGS="$CFLAGS $PTHREAD_CFLAGS $CURSES_CFLAGS"
-CXXFLAGS="$CXXFLAGS $PTHREAD_CFLAGS $CURSES_CFLAGS"
-LIBS="$PTHREAD_LIBS $CURSES_LIB $LIBS"
-
-PKG_CHECK_MODULES([libcurl], libcurl >= 7.15.4,
-             CXXFLAGS="$CXXFLAGS $libcurl_CFLAGS";
-         LIBS="$LIBS $libcurl_LIBS")
-
-PKG_CHECK_MODULES([libtorrent], libtorrent >= 0.13.4,
-             CXXFLAGS="$CXXFLAGS $libtorrent_CFLAGS";
-         LIBS="$LIBS $libtorrent_LIBS")
+PKG_CHECK_MODULES([LIBCURL], [libcurl], , [LIBCURL_CHECK_CONFIG])
+PKG_CHECK_MODULES([CPPUNIT], [cppunit],, [no_cppunit="yes"])
+PKG_CHECK_MODULES([DEPENDENCIES], [libtorrent >= 0.13.4])
+
+LIBS="$PTHREAD_LIBS $CURSES_LIB $CPPUNIT_LIBS $LIBCURL $LIBCURL_LIBS $DEPENDENCIES_LIBS $LIBS"
+CFLAGS="$CFLAGS $PTHREAD_CFLAGS $CPPUNIT_CFLAGS $LIBCURL_CPPFLAGS $LIBCURL_CFLAGS $DEPENDENCIES_CFLAGS $CURSES_CFLAGS"
+CXXFLAGS="$CXXFLAGS $PTHREAD_CFLAGS $CPPUNIT_CFLAGS $LIBCURL_CPPFLAGS $LIBCURL_CFLAGS $DEPENDENCIES_CFLAGS $CURSES_CFLAGS"
  
 AC_LANG_PUSH(C++)
 TORRENT_WITH_XMLRPC_C